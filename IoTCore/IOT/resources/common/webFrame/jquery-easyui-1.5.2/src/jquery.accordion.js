/**
 * jQuery EasyUI 1.5.2
 * 
 * Copyright (c) 2009-2017 www.jeasyui.com. All rights reserved.
 *
 * Licensed under the freeware license: http://www.jeasyui.com/license_freeware.php
 * To use it on other terms please contact us: info@jeasyui.com
 *
 */
/**
 * accordion - jQuery EasyUI
 * 
 * Dependencies:
 * 	 panel
 * 
 */
(function(c){function m(a,b){function d(a,b){for(var c=0,d=0;d<k.length;d++){var e=k[d],f=p?e.panel("header")._outerWidth(l):e.panel("header")._outerHeight(l);if(e.panel("options").collapsible==a){var h=isNaN(b)?void 0:b+l*f.length;p?(e.panel("resize",{height:g.height(),width:a?h:void 0}),c+=e.panel("panel")._outerWidth()-l*f.length):(e.panel("resize",{width:g.width(),height:a?h:void 0}),c+=e.panel("panel").outerHeight()-l*f.length)}}return c}var f=c.data(a,"accordion"),e=f.options,k=f.panels,g=c(a),p="left"==e.halign||"right"==e.halign;g.children(".panel-last").removeClass("panel-last");g.children(".panel:last").addClass("panel-last");b&&c.extend(e,{width:b.width,height:b.height});g._size(e);var l=0,f="auto",h=g.find("\x3e.panel\x3e.accordion-header");h.length&&(p?(c(k[0]).panel("resize",{width:g.width(),height:g.height()}),l=c(h[0])._outerWidth()):l=c(h[0]).css("height","")._outerHeight());isNaN(parseInt(e.height))||(f=p?g.width()-l*h.length:g.height()-l*h.length);d(!0,f-d(!1))}function h(a,b,d,f){a=c.data(a,"accordion").panels;for(var e=[],h=0;h<a.length;h++){var g=a[h];if(b)g.panel("options")[b]==d&&e.push(g);else if(g[0]==c(d)[0])return h}return b?f?e:e.length?e[0]:null:-1}function t(a){return h(a,"collapsed",!1,!0)}function v(a){a=t(a);return a.length?a[0]:null}function q(a,b){var d=c.data(a,"accordion").panels;return"number"==typeof b?0>b||b>=d.length?null:d[b]:h(a,"title",b)}function x(a){var b=c.data(a,"accordion"),d=c(a);d.addClass("accordion");b.panels=[];d.children("div").each(function(){var d=c.extend({},c.parser.parseOptions(this),{selected:c(this).attr("selected")?!0:void 0}),e=c(this);b.panels.push(e);w(a,e,d)});d.bind("_resize",function(b,d){(c(this).hasClass("easyui-fluid")||d)&&m(a);return!1})}function w(a,b,d){function f(b){var d=b.panel("options");d.collapsible&&(b=h(a,null,b),d.collapsed?n(a,b):u(a,b))}var e=c.data(a,"accordion").options;b.panel(c.extend({},{collapsible:!0,minimizable:!1,maximizable:!1,closable:!1,doSize:!1,collapsed:!0,headerCls:"accordion-header",bodyCls:"accordion-body",halign:e.halign},d,{onBeforeExpand:function(){if(d.onBeforeExpand&&0==d.onBeforeExpand.call(this))return!1;if(!e.multiple)for(var b=c.grep(t(a),function(a){return a.panel("options").collapsible}),f=0;f<b.length;f++)u(a,h(a,null,b[f]));b=c(this).panel("header");b.addClass("accordion-header-selected");b.find(".accordion-collapse").removeClass("accordion-expand")},onExpand:function(){c(a).find("\x3e.panel-last\x3e.accordion-header").removeClass("accordion-header-border");d.onExpand&&d.onExpand.call(this);e.onSelect.call(a,c(this).panel("options").title,h(a,null,this))},onBeforeCollapse:function(){if(d.onBeforeCollapse&&0==d.onBeforeCollapse.call(this))return!1;c(a).find("\x3e.panel-last\x3e.accordion-header").addClass("accordion-header-border");var b=c(this).panel("header");b.removeClass("accordion-header-selected");b.find(".accordion-collapse").addClass("accordion-expand")},onCollapse:function(){isNaN(parseInt(e.height))&&c(a).find("\x3e.panel-last\x3e.accordion-header").removeClass("accordion-header-border");d.onCollapse&&d.onCollapse.call(this);e.onUnselect.call(a,c(this).panel("options").title,h(a,null,this))}}));var k=b.panel("header"),g=k.children("div.panel-tool");g.children("a.panel-tool-collapse").hide();g=c('\x3ca href\x3d"javascript:;"\x3e\x3c/a\x3e').addClass("accordion-collapse accordion-expand").appendTo(g);g.bind("click",function(){f(b);return!1});b.panel("options").collapsible?g.show():g.hide();"left"!=e.halign&&"right"!=e.halign||g.hide();k.click(function(){f(b);return!1})}function n(a,b){var d=q(a,b);if(d){r(a);var f=c.data(a,"accordion").options;d.panel("expand",f.animate)}}function u(a,b){var d=q(a,b);if(d){r(a);var f=c.data(a,"accordion").options;d.panel("collapse",f.animate)}}function y(a){function b(b){var c=d.animate;d.animate=!1;n(a,b);d.animate=c}var d=c.data(a,"accordion").options;c(a).find("\x3e.panel-last\x3e.accordion-header").addClass("accordion-header-border");var f=h(a,"selected",!0);f?b(h(a,null,f)):b(d.selected)}function r(a){a=c.data(a,"accordion").panels;for(var b=0;b<a.length;b++)a[b].stop(!0,!0)}c.fn.accordion=function(a,b){if("string"==typeof a)return c.fn.accordion.methods[a](this,b);a=a||{};return this.each(function(){var b=c.data(this,"accordion");b?c.extend(b.options,a):(c.data(this,"accordion",{options:c.extend({},c.fn.accordion.defaults,c.fn.accordion.parseOptions(this),a),accordion:c(this).addClass("accordion"),panels:[]}),x(this));var b=c.data(this,"accordion").options,f=c(this);b.border?f.removeClass("accordion-noborder"):f.addClass("accordion-noborder");m(this);y(this)})};c.fn.accordion.methods={options:function(a){return c.data(a[0],"accordion").options},panels:function(a){return c.data(a[0],"accordion").panels},resize:function(a,b){return a.each(function(){m(this,b)})},getSelections:function(a){return t(a[0])},getSelected:function(a){return v(a[0])},getPanel:function(a,b){return q(a[0],b)},getPanelIndex:function(a,b){return h(a[0],null,b)},select:function(a,b){return a.each(function(){n(this,b)})},unselect:function(a,b){return a.each(function(){u(this,b)})},add:function(a,b){return a.each(function(){var a=c.data(this,"accordion"),f=a.options,a=a.panels;void 0==b.selected&&(b.selected=!0);r(this);var e=c("\x3cdiv\x3e\x3c/div\x3e").appendTo(this);a.push(e);w(this,e,b);m(this);f.onAdd.call(this,b.title,a.length-1);b.selected&&n(this,a.length-1)})},remove:function(a,b){return a.each(function(){var a=c.data(this,"accordion"),f=a.options,a=a.panels;r(this);var e=q(this,b),k=e.panel("options").title,g=h(this,null,e);e&&0!=f.onBeforeRemove.call(this,k,g)&&(a.splice(g,1),e.panel("destroy"),a.length&&(m(this),v(this)||n(this,0)),f.onRemove.call(this,k,g))})}};c.fn.accordion.parseOptions=function(a){c(a);return c.extend({},c.parser.parseOptions(a,["width","height","halign",{fit:"boolean",border:"boolean",animate:"boolean",multiple:"boolean",selected:"number"}]))};c.fn.accordion.defaults={width:"auto",height:"auto",fit:!1,border:!0,animate:!0,multiple:!1,selected:0,halign:"top",onSelect:function(a,b){},onUnselect:function(a,b){},onAdd:function(a,b){},onBeforeRemove:function(a,b){},onRemove:function(a,b){}}})(jQuery);