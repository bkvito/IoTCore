(function(b){var a=b.treeview.classes,e=b.fn.treeview;b.fn.treeview=function(c){c=b.extend({},c);return c.add?this.trigger("add",[c.add]):c.remove?this.trigger("remove",[c.remove]):e.apply(this,arguments).bind("add",function(e,d){b(d).prev().removeClass(a.last).removeClass(a.lastCollapsable).removeClass(a.lastExpandable).find("\x3e.hitarea").removeClass(a.lastCollapsableHitarea).removeClass(a.lastExpandableHitarea);b(d).find("li").andSelf().prepareBranches(c).applyClasses(c,b(this).data("toggler"))}).bind("remove",function(c,d){var e=b(d).prev(),f=b(d).parent();b(d).remove();e.filter(":last-child").addClass(a.last).filter("."+a.expandable).replaceClass(a.last,a.lastExpandable).end().find("\x3e.hitarea").replaceClass(a.expandableHitarea,a.lastExpandableHitarea).end().filter("."+a.collapsable).replaceClass(a.last,a.lastCollapsable).end().find("\x3e.hitarea").replaceClass(a.collapsableHitarea,a.lastCollapsableHitarea);f.is(":not(:has(\x3e))")&&f[0]!=this&&(f.parent().removeClass(a.collapsable).removeClass(a.expandable),f.siblings(".hitarea").andSelf().remove())})}})(jQuery);