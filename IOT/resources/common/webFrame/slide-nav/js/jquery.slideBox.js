/*
 * jQuery图片轮播(焦点图)插件
 * ADD.JENA.201206291027
 * EDIT.JENA.201206300904
 * EDIT.JENA.201207051027
 * EDIT.JENA.201208090849
 * EDIT.JENA.201303141312
 * Version: 1.2.0314
 * Author: jena
 * Demo: http://ishere.cn/demo/jquery.slidebox/
 */
(function(c){c.fn.slideBox=function(n){var a=c.extend({direction:"left",duration:.6,easing:"swing",delay:3,startIndex:0,hideClickBar:!0,clickBarRadius:5,hideBottomBar:!1,width:null,height:null},n||{}),e=c(this),g=e.children("ul.items"),d=g.find("li");n=d.first().find("img");var q=d.size(),f=0,h=0,k="ASC",r=function(){if(!e.size())return!1;f=a.height?a.height:d.first().height();h=a.width?a.width:d.first().width();e.css({width:h+"px",height:f+"px"});d.css({width:h+"px",height:f+"px"});"left"==a.direction?g.css("width",q*h+"px"):g.css("height",q*f+"px");g.find("li:eq("+a.startIndex+")").addClass("active");if(!a.hideBottomBar){var b=c('\x3cdiv class\x3d"tips"\x3e\x3c/div\x3e').css("opacity",.1).appendTo(e);c('\x3cdiv class\x3d"title"\x3e\x3c/div\x3e').html(function(){var a=g.find("li.active").find("a"),b=a.attr("title"),a=a.attr("href");return c("\x3ca\x3e").attr("href",a).text(b)}).appendTo(b);var l=c('\x3cdiv class\x3d"nums"\x3e\x3c/div\x3e').hide().appendTo(b);d.each(function(b,d){var f=c(d).find("a"),h=f.attr("title"),f=f.attr("href"),k="";b==a.startIndex&&(k="active");c("\x3ca\x3e").attr("href",f).text(h).addClass(k).css("borderRadius",a.clickBarRadius+"px").mouseover(function(){c(this).addClass("active").siblings().removeClass("active");g.find("li:eq("+c(this).index()+")").addClass("active").siblings().removeClass("active");m();window.clearTimeout(e.data("timeid"))}).appendTo(l)});a.hideClickBar?(b.hover(function(){l.animate({top:"0px"},"fast")},function(){l.animate({top:b.height()+"px"},"fast")}),l.show().delay(2E3).animate({top:b.height()+"px"},"fast")):l.show()}1<d.size()&&m()},m=function(){var b=g.find("li.active"),c=b.find("a"),d=b.index();"left"==a.direction?(offset=d*h*-1,param={left:offset+"px"}):(offset=d*f*-1,param={top:offset+"px"});e.find(".nums").find("a:eq("+d+")").addClass("active").siblings().removeClass("active");e.find(".title").find("a").attr("href",c.attr("href")).text(c.attr("title"));g.stop().animate(param,1E3*a.duration,a.easing,function(){b.removeClass("active");"ASC"==k?b.next().size()?b.next().addClass("active"):(k="DESC",b.prev().addClass("active")):"DESC"==k&&(b.prev().size()?b.prev().addClass("active"):(k="ASC",b.next().addClass("active")))});e.data("timeid",window.setTimeout(m,1E3*a.delay))};e.hover(function(){window.clearTimeout(e.data("timeid"))},function(){e.data("timeid",window.setTimeout(m,1E3*a.delay))});var p=new Image;p.onload=function(){p.onload=null;r()};p.src=n.attr("src")}})(jQuery);