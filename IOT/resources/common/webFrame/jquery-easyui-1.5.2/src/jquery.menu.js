/**
 * jQuery EasyUI 1.5.2
 * 
 * Copyright (c) 2009-2017 www.jeasyui.com. All rights reserved.
 *
 * Licensed under the freeware license: http://www.jeasyui.com/license_freeware.php
 * To use it on other terms please contact us: info@jeasyui.com
 *
 */
/**
 * menu - jQuery EasyUI
 * 
 */
(function(c){function x(a){function b(a){var d=[];a.addClass("menu");d.push(a);a.hasClass("menu-content")||a.children("div").each(function(){var a=c(this).children("div");a.length&&(a.appendTo("body"),this.submenu=a,a=b(a),d=d.concat(a))});return d}var d=c.data(a,"menu").options;c(a).addClass("menu-top");d.inline?c(a).addClass("menu-inline"):c(a).appendTo("body");c(a).bind("_resize",function(b,d){(c(this).hasClass("easyui-fluid")||d)&&c(a).menu("resize",a);return!1});for(var d=b(c(a)),f=0;f<d.length;f++)t(a,d[f])}function t(a,b){var d=c(b).addClass("menu");d.data("menu")||d.data("menu",{options:c.parser.parseOptions(d[0],["width","height"])});d.hasClass("menu-content")||(d.children("div").each(function(){u(a,this)}),c('\x3cdiv class\x3d"menu-line"\x3e\x3c/div\x3e').prependTo(d));n(a,d);d.hasClass("menu-inline")||d.hide();y(a,d)}function u(a,b,d){b=c(b);d=c.extend({},c.parser.parseOptions(b[0],["id","name","iconCls","href",{separator:"boolean"}]),{disabled:b.attr("disabled")?!0:void 0,text:c.trim(b.html()),onclick:b[0].onclick},d||{});d.onclick=d.onclick||d.handler||null;b.data("menuitem",{options:d});d.separator&&b.addClass("menu-sep");b.hasClass("menu-sep")||(b.addClass("menu-item"),b.empty().append(c('\x3cdiv class\x3d"menu-text"\x3e\x3c/div\x3e').html(d.text)),d.iconCls&&c('\x3cdiv class\x3d"menu-icon"\x3e\x3c/div\x3e').addClass(d.iconCls).appendTo(b),d.id&&b.attr("id",d.id),d.onclick&&("string"==typeof d.onclick?b.attr("onclick",d.onclick):b[0].onclick=eval(d.onclick)),d.disabled&&p(a,b[0],!0),b[0].submenu&&c('\x3cdiv class\x3d"menu-rightarrow"\x3e\x3c/div\x3e').appendTo(b))}function n(a,b){var d=c.data(a,"menu").options,f=b.attr("style")||"",h=b.is(":visible");b.css({display:"block",left:-1E4,height:"auto",overflow:"hidden"});b.find(".menu-item").each(function(){c(this)._outerHeight(d.itemHeight);c(this).find(".menu-text").css({height:d.itemHeight-2+"px",lineHeight:d.itemHeight-2+"px"})});b.removeClass("menu-noline").addClass(d.noline?"menu-noline":"");var g=b.data("menu").options,e=g.width,k=g.height;isNaN(parseInt(e))&&(e=0,b.find("div.menu-text").each(function(){e<c(this).outerWidth()&&(e=c(this).outerWidth())}),e=e?e+40:"");var q=b.outerHeight();if(isNaN(parseInt(k)))if(k=q,b.hasClass("menu-top")&&d.alignTo)var m=c(d.alignTo),l=m.offset().top-c(document).scrollTop(),m=c(window)._outerHeight()+c(document).scrollTop()-m.offset().top-m._outerHeight(),k=Math.min(k,Math.max(l,m));else k>c(window)._outerHeight()&&(k=c(window).height());b.attr("style",f);b.show();b._size(c.extend({},g,{width:e,height:k,minWidth:g.minWidth||d.minWidth,maxWidth:g.maxWidth||d.maxWidth}));b.find(".easyui-fluid").triggerHandler("_resize",[!0]);b.css("overflow",b.outerHeight()<q?"auto":"hidden");b.children("div.menu-line")._outerHeight(q-2);h||b.hide()}function y(a,b){var d=c.data(a,"menu").options;b.unbind(".menu");for(var f in d.events)b.bind(f+".menu",{target:a},d.events[f])}function r(a,b){var d=c.data(a,"menu");d&&c(a).is(":visible")&&(l(c(a)),b?c(a).show():d.options.onHide.call(a));return!1}function z(a,b){function d(a,b){a+e.outerHeight()>c(window)._outerHeight()+c(document).scrollTop()&&(a=b?c(b).offset().top-e._outerHeight():c(window)._outerHeight()+c(document).scrollTop()-e.outerHeight());0>a&&(a=0);return a}b=b||{};var f,h,g=c.data(a,"menu").options,e=c(b.menu||a);c(a).menu("resize",e[0]);if(e.hasClass("menu-top")){c.extend(g,b);f=g.left;h=g.top;if(g.alignTo){var k=c(g.alignTo);f=k.offset().left;h=k.offset().top+k._outerHeight();"right"==g.align&&(f+=k.outerWidth()-e.outerWidth())}f+e.outerWidth()>c(window)._outerWidth()+c(document)._scrollLeft()&&(f=c(window)._outerWidth()+c(document).scrollLeft()-e.outerWidth()-5);0>f&&(f=0);h=d(h,g.alignTo)}else h=b.parent,f=h.offset().left+h.outerWidth()-2,f+e.outerWidth()+5>c(window)._outerWidth()+c(document).scrollLeft()&&(f=h.offset().left-e.outerWidth()+2),h=d(h.offset().top-3);e.css(g.position.call(a,e[0],f,h));e.show(0,function(){e[0].shadow||(e[0].shadow=c('\x3cdiv class\x3d"menu-shadow"\x3e\x3c/div\x3e').insertAfter(e));e[0].shadow.css({display:e.hasClass("menu-inline")?"none":"block",zIndex:c.fn.menu.defaults.zIndex++,left:e.css("left"),top:e.css("top"),width:e.outerWidth(),height:e.outerHeight()});e.css("z-index",c.fn.menu.defaults.zIndex++);e.hasClass("menu-top")&&g.onShow.call(a)})}function l(a){function b(a){a.stop(!0,!0);a[0].shadow&&a[0].shadow.hide();a.hide()}a&&a.length&&(b(a),a.find("div.menu-item").each(function(){this.submenu&&l(this.submenu);c(this).removeClass("menu-active")}))}function A(a,b){function d(g){g.children("div.menu-item").each(function(){var e=c(a).menu("getItem",this),g=h.empty().html(e.text).text();b==c.trim(g)?f=e:this.submenu&&!f&&d(this.submenu)})}var f=null,h=c("\x3cdiv\x3e\x3c/div\x3e");d(c(a));h.remove();return f}function p(a,b,d){a=c(b);a.hasClass("menu-item")&&(b=a.data("menuitem").options,(b.disabled=d)?(a.addClass("menu-item-disabled"),a[0].onclick=null):(a.removeClass("menu-item-disabled"),a[0].onclick=b.onclick))}function v(a,b){function d(a){if(a.submenu){a.submenu.children("div.menu-item").each(function(){d(this)});var b=a.submenu[0].shadow;b&&b.remove();a.submenu.remove()}c(a).remove()}d(b)}function w(a,b,d){var f=c(b).parent();d?c(b).show():c(b).hide();n(a,f)}function B(a){c(a).children("div.menu-item").each(function(){v(a,this)});a.shadow&&a.shadow.remove();c(a).remove()}c(function(){c(document).unbind(".menu").bind("mousedown.menu",function(a){c(a.target).closest("div.menu,div.combo-p").length||(c("body\x3ediv.menu-top:visible").not(".menu-inline").menu("hide"),l(c("body\x3ediv.menu:visible").not(".menu-inline")))})});c.fn.menu=function(a,b){if("string"==typeof a)return c.fn.menu.methods[a](this,b);a=a||{};return this.each(function(){var b=c.data(this,"menu");b?c.extend(b.options,a):(b=c.data(this,"menu",{options:c.extend({},c.fn.menu.defaults,c.fn.menu.parseOptions(this),a)}),x(this));c(this).css({left:b.options.left,top:b.options.top})})};c.fn.menu.methods={options:function(a){return c.data(a[0],"menu").options},show:function(a,b){return a.each(function(){z(this,b)})},hide:function(a){return a.each(function(){r(this)})},destroy:function(a){return a.each(function(){B(this)})},setText:function(a,b){return a.each(function(){c(b.target).data("menuitem").options.text=b.text;c(b.target).children("div.menu-text").html(b.text)})},setIcon:function(a,b){return a.each(function(){c(b.target).data("menuitem").options.iconCls=b.iconCls;c(b.target).children("div.menu-icon").remove();b.iconCls&&c('\x3cdiv class\x3d"menu-icon"\x3e\x3c/div\x3e').addClass(b.iconCls).appendTo(b.target)})},getItem:function(a,b){var d=c(b).data("menuitem").options;return c.extend({},d,{target:c(b)[0]})},findItem:function(a,b){return A(a[0],b)},appendItem:function(a,b){return a.each(function(){c.data(this,"menu");var a=c(this);b.parent&&(b.parent.submenu||(a=c("\x3cdiv\x3e\x3c/div\x3e").appendTo("body"),b.parent.submenu=a,c('\x3cdiv class\x3d"menu-rightarrow"\x3e\x3c/div\x3e').appendTo(b.parent),t(this,a)),a=b.parent.submenu);a=c("\x3cdiv\x3e\x3c/div\x3e").appendTo(a);u(this,a,b)})},removeItem:function(a,b){return a.each(function(){v(this,b)})},enableItem:function(a,b){return a.each(function(){p(this,b,!1)})},disableItem:function(a,b){return a.each(function(){p(this,b,!0)})},showItem:function(a,b){return a.each(function(){w(this,b,!0)})},hideItem:function(a,b){return a.each(function(){w(this,b,!1)})},resize:function(a,b){return a.each(function(){n(this,b?c(b):c(this))})}};c.fn.menu.parseOptions=function(a){return c.extend({},c.parser.parseOptions(a,[{minWidth:"number",itemHeight:"number",duration:"number",hideOnUnhover:"boolean"},{fit:"boolean",inline:"boolean",noline:"boolean"}]))};c.fn.menu.defaults={zIndex:11E4,left:0,top:0,alignTo:null,align:"left",minWidth:120,itemHeight:22,duration:100,hideOnUnhover:!0,inline:!1,fit:!1,noline:!1,events:{mouseenter:function(a){a=c.data(a.data.target,"menu");a.timer&&(clearTimeout(a.timer),a.timer=null)},mouseleave:function(a){var b=a.data.target;a=c.data(b,"menu");a.options.hideOnUnhover&&(a.timer=setTimeout(function(){r(b,c(b).hasClass("menu-inline"))},a.options.duration))},mouseover:function(a){var b=a.data.target;a=c(a.target).closest(".menu-item");if(a.length)if(a.siblings().each(function(){this.submenu&&l(this.submenu);c(this).removeClass("menu-active")}),a.addClass("menu-active"),a.hasClass("menu-item-disabled"))a.addClass("menu-active-disabled");else{var d=a[0].submenu;d&&c(b).menu("show",{menu:d,parent:a})}},mouseout:function(a){var b=c(a.target).closest(".menu-item");if(b.length){b.removeClass("menu-active menu-active-disabled");var d=b[0].submenu;d?a.pageX>=parseInt(d.css("left"))?b.addClass("menu-active"):l(d):b.removeClass("menu-active")}},click:function(a){var b=a.data.target;a=c(a.target).closest(".menu-item");if(a.length){var d=c(b).data("menu").options,f=a.data("menuitem").options;f.disabled||(a[0].submenu||(r(b,d.inline),f.href&&(location.href=f.href)),a.trigger("mouseenter"),d.onClick.call(b,c(b).menu("getItem",a[0])))}}},position:function(a,b,c){return{left:b,top:c}},onShow:function(){},onHide:function(){},onClick:function(a){}}})(jQuery);