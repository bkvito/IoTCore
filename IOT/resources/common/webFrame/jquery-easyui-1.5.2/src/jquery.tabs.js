/**
 * jQuery EasyUI 1.5.2
 * 
 * Copyright (c) 2009-2017 www.jeasyui.com. All rights reserved.
 *
 * Licensed under the freeware license: http://www.jeasyui.com/license_freeware.php
 * To use it on other terms please contact us: info@jeasyui.com
 *
 */
/**
 * tabs - jQuery EasyUI
 * 
 * Dependencies:
 * 	 panel
 *   linkbutton
 * 
 */
(function(d){function v(a){var b=0;d(a).children().each(function(){b+=d(this).outerWidth(!0)});return b}function C(a){var b=d.data(a,"tabs").options;if("left"!=b.tabPosition&&"right"!=b.tabPosition&&b.showHeader){var c=d(a).children("div.tabs-header");a=c.children("div.tabs-tool:not(.tabs-tool-hidden)");var f=c.children("div.tabs-scroller-left"),e=c.children("div.tabs-scroller-right"),h=c.children("div.tabs-wrap"),g=c.outerHeight();b.plain&&(g-=g-c.height());a._outerHeight(g);var k=v(c.find("ul.tabs")),c=c.width()-a._outerWidth();k>c?(f.add(e).show()._outerHeight(g),"left"==b.toolPosition?(a.css({left:f.outerWidth(),right:""}),h.css({marginLeft:f.outerWidth()+a._outerWidth(),marginRight:e._outerWidth(),width:c-f.outerWidth()-e.outerWidth()})):(a.css({left:"",right:e.outerWidth()}),h.css({marginLeft:f.outerWidth(),marginRight:e.outerWidth()+a._outerWidth(),width:c-f.outerWidth()-e.outerWidth()}))):(f.add(e).hide(),"left"==b.toolPosition?(a.css({left:0,right:""}),h.css({marginLeft:a._outerWidth(),marginRight:0,width:c})):(a.css({left:"",right:0}),h.css({marginLeft:0,marginRight:a._outerWidth(),width:c})))}}function D(a){var b=d.data(a,"tabs").options;a=d(a).children("div.tabs-header");if(b.tools)if("string"==typeof b.tools)d(b.tools).addClass("tabs-tool").appendTo(a),d(b.tools).show();else{a.children("div.tabs-tool").remove();a=d('\x3cdiv class\x3d"tabs-tool"\x3e\x3ctable cellspacing\x3d"0" cellpadding\x3d"0" style\x3d"height:100%"\x3e\x3ctr\x3e\x3c/tr\x3e\x3c/table\x3e\x3c/div\x3e').appendTo(a).find("tr");for(var c=0;c<b.tools.length;c++){var f=d("\x3ctd\x3e\x3c/td\x3e").appendTo(a),f=d('\x3ca href\x3d"javascript:;"\x3e\x3c/a\x3e').appendTo(f);f[0].onclick=eval(b.tools[c].handler||function(){});f.linkbutton(d.extend({},b.tools[c],{plain:!0}))}}else a.children("div.tabs-tool").remove()}function r(a,b){function c(a,b){var d=a.panel("options"),c=d.tab.find("a.tabs-inner");(b=b?b:parseInt(d.tabWidth||e.tabWidth||void 0))?c._outerWidth(b):c.css("width","");c._outerHeight(e.tabHeight);c.css("lineHeight",c.height()+"px");c.find(".easyui-fluid:visible").triggerHandler("_resize")}var f=d.data(a,"tabs"),e=f.options,h=d(a);if(e.doSize){b&&d.extend(e,{width:b.width,height:b.height});h._size(e);var g=h.children("div.tabs-header"),k=h.children("div.tabs-panels"),l=g.find("div.tabs-wrap"),m=l.find(".tabs");m.children("li").removeClass("tabs-first tabs-last");m.children("li:first").addClass("tabs-first");m.children("li:last").addClass("tabs-last");"left"==e.tabPosition||"right"==e.tabPosition?(g._outerWidth(e.showHeader?e.headerWidth:0),k._outerWidth(h.width()-g.outerWidth()),g.add(k)._size("height",isNaN(parseInt(e.height))?"":h.height()),l._outerWidth(g.width()),m._outerWidth(l.width()).css("height","")):(g.children("div.tabs-scroller-left,div.tabs-scroller-right,div.tabs-tool:not(.tabs-tool-hidden)").css("display",e.showHeader?"block":"none"),g._outerWidth(h.width()).css("height",""),e.showHeader?(g.css("background-color",""),l.css("height","")):(g.css("background-color","transparent"),g._outerHeight(0),l._outerHeight(0)),m._outerHeight(e.tabHeight).css("width",""),m._outerHeight(m.outerHeight()-m.height()-1+e.tabHeight).css("width",""),k._size("height",isNaN(parseInt(e.height))?"":h.height()-g.outerHeight()),k._size("width",h.width()));if(f.tabs.length){var h=m.outerWidth(!0)-m.width(),k=m.children("li:first"),k=k.outerWidth(!0)-k.width(),g=g.width()-g.children(".tabs-tool:not(.tabs-tool-hidden)")._outerWidth(),n=Math.floor((g-h-k*f.tabs.length)/f.tabs.length);d.map(f.tabs,function(a){c(a,e.justified&&0<=d.inArray(e.tabPosition,["top","bottom"])?n:void 0)});e.justified&&0<=d.inArray(e.tabPosition,["top","bottom"])&&(m=g-h-v(m),c(f.tabs[f.tabs.length-1],n+m))}C(a)}}function t(a){var b=d.data(a,"tabs").options,c=u(a);if(c){var f=d(a).children("div.tabs-panels");a="auto"==b.width?"auto":f.width();b="auto"==b.height?"auto":f.height();c.panel("resize",{width:a,height:b})}}function E(a){d.data(a,"tabs");var b=d(a).addClass("tabs-container"),c=d('\x3cdiv class\x3d"tabs-panels"\x3e\x3c/div\x3e').insertBefore(b);b.children("div").each(function(){c[0].appendChild(this)});b[0].appendChild(c[0]);d('\x3cdiv class\x3d"tabs-header"\x3e\x3cdiv class\x3d"tabs-scroller-left"\x3e\x3c/div\x3e\x3cdiv class\x3d"tabs-scroller-right"\x3e\x3c/div\x3e\x3cdiv class\x3d"tabs-wrap"\x3e\x3cul class\x3d"tabs"\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e').prependTo(a);b.children("div.tabs-panels").children("div").each(function(b){b=d.extend({},d.parser.parseOptions(this),{disabled:d(this).attr("disabled")?!0:void 0,selected:d(this).attr("selected")?!0:void 0});w(a,b,d(this))});b.children("div.tabs-header").find(".tabs-scroller-left, .tabs-scroller-right").hover(function(){d(this).addClass("tabs-scroller-over")},function(){d(this).removeClass("tabs-scroller-over")});b.bind("_resize",function(b,c){if(d(this).hasClass("easyui-fluid")||c)r(a),t(a);return!1})}function F(a){function b(a){var b=0;a.parent().children("li").each(function(c){if(a[0]==this)return b=c,!1});return b}var c=d.data(a,"tabs"),f=c.options;d(a).children("div.tabs-header").unbind().bind("click",function(e){if(d(e.target).hasClass("tabs-scroller-left"))d(a).tabs("scrollBy",-f.scrollIncrement);else if(d(e.target).hasClass("tabs-scroller-right"))d(a).tabs("scrollBy",f.scrollIncrement);else{var h=d(e.target).closest("li");if(h.hasClass("tabs-disabled"))return!1;d(e.target).closest("a.tabs-close").length?x(a,b(h)):h.length&&(e=b(h),h=c.tabs[e].panel("options"),h.collapsible?h.closed?n(a,e):y(a,e):n(a,e));return!1}}).bind("contextmenu",function(c){var e=d(c.target).closest("li");e.hasClass("tabs-disabled")||e.length&&f.onContextMenu.call(a,c,e.find("span.tabs-title").html(),b(e))})}function w(a,b,c){b=b||{};var f=d.data(a,"tabs"),e=f.tabs;if(void 0==b.index||b.index>e.length)b.index=e.length;0>b.index&&(b.index=0);var h=d(a).children("div.tabs-header").find("ul.tabs"),g=d(a).children("div.tabs-panels"),k=d('\x3cli\x3e\x3ca href\x3d"javascript:;" class\x3d"tabs-inner"\x3e\x3cspan class\x3d"tabs-title"\x3e\x3c/span\x3e\x3cspan class\x3d"tabs-icon"\x3e\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e');c||(c=d("\x3cdiv\x3e\x3c/div\x3e"));b.index>=e.length?(k.appendTo(h),c.appendTo(g),e.push(c)):(k.insertBefore(h.children("li:eq("+b.index+")")),c.insertBefore(g.children("div.panel:eq("+b.index+")")),e.splice(b.index,0,c));c.panel(d.extend({},b,{tab:k,border:!1,noheader:!0,closed:!0,doSize:!1,iconCls:b.icon?b.icon:void 0,onLoad:function(){b.onLoad&&b.onLoad.call(this,arguments);f.options.onLoad.call(a,d(this))},onBeforeOpen:function(){if(b.onBeforeOpen&&0==b.onBeforeOpen.call(this))return!1;var c=d(a).tabs("getSelected");if(c)if(c[0]!=this){if(d(a).tabs("unselect",p(a,c)),c=d(a).tabs("getSelected"))return!1}else return t(a),!1;c=d(this).panel("options");c.tab.addClass("tabs-selected");var e=d(a).find("\x3ediv.tabs-header\x3ediv.tabs-wrap"),f=c.tab.position().left,g=f+c.tab.outerWidth();0>f||g>e.width()?(c=f-(e.width()-c.tab.width())/2,d(a).tabs("scrollBy",c)):d(a).tabs("scrollBy",0);c=d(this).panel("panel");c.css("display","block");t(a);c.css("display","none")},onOpen:function(){b.onOpen&&b.onOpen.call(this);var c=d(this).panel("options");f.selectHis.push(c.title);f.options.onSelect.call(a,c.title,p(a,this))},onBeforeClose:function(){if(b.onBeforeClose&&0==b.onBeforeClose.call(this))return!1;d(this).panel("options").tab.removeClass("tabs-selected")},onClose:function(){b.onClose&&b.onClose.call(this);var c=d(this).panel("options");f.options.onUnselect.call(a,c.title,p(a,this))}}));d(a).tabs("update",{tab:c,options:c.panel("options"),type:"header"})}function G(a,b){b.type=b.type||"all";var c=d.data(a,"tabs").selectHis,f=b.tab,e=f.panel("options"),h=e.title;d.extend(e,b.options,{iconCls:b.options.icon?b.options.icon:void 0});"all"!=b.type&&"body"!=b.type||f.panel();if("all"==b.type||"header"==b.type){var g=e.tab;if(e.header)g.find(".tabs-inner").html(d(e.header));else{var k=g.find("span.tabs-title"),l=g.find("span.tabs-icon");k.html(e.title);l.attr("class","tabs-icon");g.find("a.tabs-close").remove();e.closable?(k.addClass("tabs-closable"),d('\x3ca href\x3d"javascript:;" class\x3d"tabs-close"\x3e\x3c/a\x3e').appendTo(g)):k.removeClass("tabs-closable");e.iconCls?(k.addClass("tabs-with-icon"),l.addClass(e.iconCls)):k.removeClass("tabs-with-icon");if(e.tools){l=g.find("span.tabs-p-tool");l.length||(l=d('\x3cspan class\x3d"tabs-p-tool"\x3e\x3c/span\x3e').insertAfter(g.find("a.tabs-inner")));if(d.isArray(e.tools))for(l.empty(),g=0;g<e.tools.length;g++){var m=d('\x3ca href\x3d"javascript:;"\x3e\x3c/a\x3e').appendTo(l);m.addClass(e.tools[g].iconCls);e.tools[g].handler&&m.bind("click",{handler:e.tools[g].handler},function(a){d(this).parents("li").hasClass("tabs-disabled")||a.data.handler.call(this)})}else d(e.tools).children().appendTo(l);g=12*l.children().length;e.closable?(g+=8,l.css("right","")):(g-=3,l.css("right","5px"));k.css("padding-right",g+"px")}else g.find("span.tabs-p-tool").remove(),k.css("padding-right","")}if(h!=e.title)for(g=0;g<c.length;g++)c[g]==h&&(c[g]=e.title)}e.disabled?e.tab.addClass("tabs-disabled"):e.tab.removeClass("tabs-disabled");r(a);d.data(a,"tabs").options.onUpdate.call(a,e.title,p(a,f))}function x(a,b){var c=d.data(a,"tabs").options,f=d.data(a,"tabs").tabs,e=d.data(a,"tabs").selectHis;if(null!=q(a,b)){var h=q(a,b),g=h.panel("options").title,k=p(a,h);if(0!=c.onBeforeClose.call(a,g,k)){h=q(a,b,!0);h.panel("options").tab.remove();h.panel("destroy");c.onClose.call(a,g,k);r(a);for(c=0;c<e.length;c++)e[c]==g&&(e.splice(c,1),c--);(e=e.pop())?n(a,e):f.length&&n(a,0)}}}function q(a,b,c){a=d.data(a,"tabs").tabs;var f=null;if("number"==typeof b)0<=b&&b<a.length&&(f=a[b],c&&a.splice(b,1));else{for(var e=d("\x3cspan\x3e\x3c/span\x3e"),h=0;h<a.length;h++){var g=a[h];e.html(g.panel("options").title);if(e.text()==b){f=g;c&&a.splice(h,1);break}}e.remove()}return f}function p(a,b){for(var c=d.data(a,"tabs").tabs,f=0;f<c.length;f++)if(c[f][0]==d(b)[0])return f;return-1}function u(a){a=d.data(a,"tabs").tabs;for(var b=0;b<a.length;b++){var c=a[b];if(c.panel("options").tab.hasClass("tabs-selected"))return c}return null}function n(a,b){var c=q(a,b);c&&!c.is(":visible")&&(z(a),c.panel("options").disabled||c.panel("open"))}function y(a,b){var c=q(a,b);c&&c.is(":visible")&&(z(a),c.panel("close"))}function z(a){d(a).children("div.tabs-panels").each(function(){d(this).stop(!0,!0)})}function A(a,b){d.data(a,"tabs").options.showHeader=b;d(a).tabs("resize")}function B(a,b){var c=d(a).find("\x3e.tabs-header\x3e.tabs-tool");b?c.removeClass("tabs-tool-hidden").show():c.addClass("tabs-tool-hidden").hide();d(a).tabs("resize").tabs("scrollBy",0)}d.fn.tabs=function(a,b){if("string"==typeof a)return d.fn.tabs.methods[a](this,b);a=a||{};return this.each(function(){var b=d.data(this,"tabs");b?d.extend(b.options,a):(d.data(this,"tabs",{options:d.extend({},d.fn.tabs.defaults,d.fn.tabs.parseOptions(this),a),tabs:[],selectHis:[]}),E(this));D(this);var b=d.data(this,"tabs").options,f=d(this).children("div.tabs-header"),e=d(this).children("div.tabs-panels");f.removeClass("tabs-header-top tabs-header-bottom tabs-header-left tabs-header-right");e.removeClass("tabs-panels-top tabs-panels-bottom tabs-panels-left tabs-panels-right");"top"==b.tabPosition?f.insertBefore(e):"bottom"==b.tabPosition?(f.insertAfter(e),f.addClass("tabs-header-bottom"),e.addClass("tabs-panels-top")):"left"==b.tabPosition?(f.addClass("tabs-header-left"),e.addClass("tabs-panels-right")):"right"==b.tabPosition&&(f.addClass("tabs-header-right"),e.addClass("tabs-panels-left"));1==b.plain?f.addClass("tabs-header-plain"):f.removeClass("tabs-header-plain");f.removeClass("tabs-header-narrow").addClass(b.narrow?"tabs-header-narrow":"");var h=f.find(".tabs");h.removeClass("tabs-pill").addClass(b.pill?"tabs-pill":"");h.removeClass("tabs-narrow").addClass(b.narrow?"tabs-narrow":"");h.removeClass("tabs-justified").addClass(b.justified?"tabs-justified":"");1==b.border?(f.removeClass("tabs-header-noborder"),e.removeClass("tabs-panels-noborder")):(f.addClass("tabs-header-noborder"),e.addClass("tabs-panels-noborder"));b.doSize=!0;r(this);F(this);a:{b=d.data(this,"tabs");f=b.tabs;for(e=0;e<f.length;e++)if(h=f[e].panel("options"),h.selected&&!h.disabled){n(this,e);break a}n(this,b.options.selected)}})};d.fn.tabs.methods={options:function(a){a=a[0];var b=d.data(a,"tabs").options,c=u(a);b.selected=c?p(a,c):-1;return b},tabs:function(a){return d.data(a[0],"tabs").tabs},resize:function(a,b){return a.each(function(){r(this,b);t(this)})},add:function(a,b){return a.each(function(){var a=d.data(this,"tabs").options;void 0==b.selected&&(b.selected=!0);w(this,b);a.onAdd.call(this,b.title,b.index);b.selected&&n(this,b.index)})},close:function(a,b){return a.each(function(){x(this,b)})},getTab:function(a,b){return q(a[0],b)},getTabIndex:function(a,b){return p(a[0],b)},getSelected:function(a){return u(a[0])},select:function(a,b){return a.each(function(){n(this,b)})},unselect:function(a,b){return a.each(function(){y(this,b)})},exists:function(a,b){return null!=q(a[0],b)},update:function(a,b){return a.each(function(){G(this,b)})},enableTab:function(a,b){return a.each(function(){var a=d(this).tabs("getTab",b).panel("options");a.tab.removeClass("tabs-disabled");a.disabled=!1})},disableTab:function(a,b){return a.each(function(){var a=d(this).tabs("getTab",b).panel("options");a.tab.addClass("tabs-disabled");a.disabled=!0})},showHeader:function(a){return a.each(function(){A(this,!0)})},hideHeader:function(a){return a.each(function(){A(this,!1)})},showTool:function(a){return a.each(function(){B(this,!0)})},hideTool:function(a){return a.each(function(){B(this,!1)})},scrollBy:function(a,b){return a.each(function(){var a=d(this).tabs("options"),f=d(this).find("\x3ediv.tabs-header\x3ediv.tabs-wrap"),e=Math.min(f._scrollLeft()+b,function(){var a=0,b=f.children("ul");b.children("li").each(function(){a+=d(this).outerWidth(!0)});return a-f.width()+(b.outerWidth()-b.width())}());f.animate({scrollLeft:e},a.scrollDuration)})}};d.fn.tabs.parseOptions=function(a){return d.extend({},d.parser.parseOptions(a,["tools","toolPosition","tabPosition",{fit:"boolean",border:"boolean",plain:"boolean"},{headerWidth:"number",tabWidth:"number",tabHeight:"number",selected:"number"},{showHeader:"boolean",justified:"boolean",narrow:"boolean",pill:"boolean"}]))};d.fn.tabs.defaults={width:"auto",height:"auto",headerWidth:150,tabWidth:"auto",tabHeight:27,selected:0,showHeader:!0,plain:!1,fit:!1,border:!0,justified:!1,narrow:!1,pill:!1,tools:null,toolPosition:"right",tabPosition:"top",scrollIncrement:100,scrollDuration:400,onLoad:function(a){},onSelect:function(a,b){},onUnselect:function(a,b){},onBeforeClose:function(a,b){},onClose:function(a,b){},onAdd:function(a,b){},onUpdate:function(a,b){},onContextMenu:function(a,b,c){}}})(jQuery);