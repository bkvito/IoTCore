/**
 * jQuery EasyUI 1.5.2
 * 
 * Copyright (c) 2009-2017 www.jeasyui.com. All rights reserved.
 *
 * Licensed under the freeware license: http://www.jeasyui.com/license_freeware.php
 * To use it on other terms please contact us: info@jeasyui.com
 *
 */
(function(b){function q(a,c){var d=b.data(a,"form").options;b.extend(d,c||{});var g=b.extend({},d.queryParams);if(0!=d.onSubmit.call(a,g)){var f=b(a).find(".textbox-text:focus");f.triggerHandler("blur");f.focus();f=null;if(d.dirty){var h=[];b.map(d.dirtyFields,function(a){b(a).hasClass("textbox-f")?b(a).next().find(".textbox-value").each(function(){h.push(this)}):h.push(a)});f=b(a).find("input[name]:enabled,textarea[name]:enabled,select[name]:enabled").filter(function(){return-1==b.inArray(this,h)});f.attr("disabled","disabled")}d.ajax?d.iframe?r(a,g):void 0!==window.FormData?w(a,g):r(a,g):b(a).submit();d.dirty&&f.removeAttr("disabled")}}function r(a,c){function d(){var a=b("#"+h);if(a.length)try{var c=a.contents()[0].readyState;c&&"uninitialized"==c.toLowerCase()&&setTimeout(d,100)}catch(A){g()}}function g(){var c=b("#"+h);if(c.length){c.unbind();var d="";try{var e=c.contents().find("body"),d=e.html();if(""==d&&--l){setTimeout(g,100);return}var u=e.find("\x3etextarea");if(u.length)d=u.val();else{var k=e.find("\x3epre");k.length&&(d=k.html())}}catch(p){}f.success.call(a,d);setTimeout(function(){c.unbind();c.remove()},100)}}var f=b.data(a,"form").options,h="easyui_frame_"+(new Date).getTime(),e=b("\x3ciframe id\x3d"+h+" name\x3d"+h+"\x3e\x3c/iframe\x3e").appendTo("body");e.attr("src",window.ActiveXObject?"javascript:false":"about:blank");e.css({position:"absolute",top:-1E3,left:-1E3});e.bind("load",g);(function(c){var e=b(a);f.url&&e.attr("action",f.url);var g=e.attr("target"),l=e.attr("action");e.attr("target",h);var k=b();try{for(var t in c)var n=b('\x3cinput type\x3d"hidden" name\x3d"'+t+'"\x3e').val(c[t]).appendTo(e),k=k.add(n);d();e[0].submit()}finally{e.attr("action",l),g?e.attr("target",g):e.removeAttr("target"),k.remove()}})(c);var l=10}function w(a,c){var d=b.data(a,"form").options,g=new FormData(b(a)[0]),f;for(f in c)g.append(f,c[f]);b.ajax({url:d.url,type:"post",xhr:function(){var c=b.ajaxSettings.xhr();c.upload&&c.upload.addEventListener("progress",function(b){b.lengthComputable&&d.onProgress.call(a,Math.ceil(100*(b.loaded||b.position)/b.total))},!1);return c},data:g,dataType:"html",cache:!1,contentType:!1,processData:!1,complete:function(b){d.success.call(a,b.responseText)}})}function x(a,c){function d(c){var d=b(a),e;for(e in c){var f=c[e];if(!g(e,f)){var l;a:{var k=e;l=f;k=b(a).find('[textboxName\x3d"'+k+'"],[sliderName\x3d"'+k+'"]');if(k.length)for(var p=0;p<h.fieldTypes.length;p++){var n=h.fieldTypes[p],m=k.data(n);if(m){if(m.options.multiple||m.options.range)k[n]("setValues",l);else k[n]("setValue",l);l=!0;break a}}l=!1}l||(d.find('input[name\x3d"'+e+'"]').val(f),d.find('textarea[name\x3d"'+e+'"]').val(f),d.find('select[name\x3d"'+e+'"]').val(f))}}h.onLoadSuccess.call(a,c);d.form("validate")}function g(c,d){var e=b(a).find('[switchbuttonName\x3d"'+c+'"]');if(e.length)return e.switchbutton("uncheck"),e.each(function(){f(b(this).switchbutton("options").value,d)&&b(this).switchbutton("check")}),!0;e=b(a).find('input[name\x3d"'+c+'"][type\x3dradio], input[name\x3d"'+c+'"][type\x3dcheckbox]');return e.length?(e._propAttr("checked",!1),e.each(function(){f(b(this).val(),d)&&b(this)._propAttr("checked",!0)}),!0):!1}function f(a,c){return a==String(c)||0<=b.inArray(a,b.isArray(c)?c:[c])?!0:!1}var h=b.data(a,"form").options;if("string"==typeof c){var e={};0!=h.onBeforeLoad.call(a,e)&&b.ajax({url:c,data:e,dataType:"json",success:function(a){d(a)},error:function(){h.onLoadError.apply(a,arguments)}})}else d(c)}function y(a){b("input,select,textarea",a).each(function(){if(!b(this).hasClass("textbox-value")){var a=this.type,c=this.tagName.toLowerCase();"text"==a||"hidden"==a||"password"==a||"textarea"==c?this.value="":"file"==a?(a=b(this),a.hasClass("textbox-value")||(c=a.clone().val(""),c.insertAfter(a),a.data("validatebox")?(a.validatebox("destroy"),c.validatebox()):a.remove())):"checkbox"==a||"radio"==a?this.checked=!1:"select"==c&&(this.selectedIndex=-1)}});var c=b(),d=b(a);a=b.data(a,"form").options;for(var g=0;g<a.fieldTypes.length;g++){var f=a.fieldTypes[g],h=d.find("."+f+"-f").not(c);h.length&&h[f]&&(h[f]("clear"),c=c.add(h))}d.form("validate")}function z(a){var c=b.data(a,"form").options;b(a).unbind(".form");c.ajax&&b(a).bind("submit.form",function(){setTimeout(function(){q(a,c)},0);return!1});b(a).bind("_change.form",function(a,g){-1==b.inArray(g,c.dirtyFields)&&c.dirtyFields.push(g);c.onChange.call(this,g)}).bind("change.form",function(a){a=a.target;b(a).hasClass("textbox-text")||(-1==b.inArray(a,c.dirtyFields)&&c.dirtyFields.push(a),c.onChange.call(this,a))});m(a,c.novalidate)}function v(a,c){c=c||{};var d=b.data(a,"form");d?b.extend(d.options,c):b.data(a,"form",{options:b.extend({},b.fn.form.defaults,b.fn.form.parseOptions(a),c)})}function m(a,c){b.data(a,"form").options.novalidate=c;b(a).find(".validatebox-text:not(:disabled)").validatebox(c?"disableValidation":"enableValidation")}b.fn.form=function(a,c){return"string"==typeof a?(this.each(function(){v(this)}),b.fn.form.methods[a](this,c)):this.each(function(){v(this,a);z(this)})};b.fn.form.methods={options:function(a){return b.data(a[0],"form").options},submit:function(a,c){return a.each(function(){q(this,c)})},load:function(a,c){return a.each(function(){x(this,c)})},clear:function(a){return a.each(function(){y(this)})},reset:function(a){return a.each(function(){this.reset();for(var a=b(this),d=b.data(this,"form").options,g=d.fieldTypes.length-1;0<=g;g--){var f=d.fieldTypes[g],h=a.find("."+f+"-f");if(h.length&&h[f])h[f]("reset")}a.form("validate")})},validate:function(a){b.fn.validatebox?(a=b(a[0]),a.find(".validatebox-text:not(:disabled)").validatebox("validate"),a=a.find(".validatebox-invalid"),a.filter(":not(:disabled):first").focus(),a=0==a.length):a=!0;return a},disableValidation:function(a){return a.each(function(){m(this,!0)})},enableValidation:function(a){return a.each(function(){m(this,!1)})},resetValidation:function(a){return a.each(function(){b(this).find(".validatebox-text:not(:disabled)").validatebox("resetValidation")})},resetDirty:function(a){return a.each(function(){b(this).form("options").dirtyFields=[]})}};b.fn.form.parseOptions=function(a){var c=b(a);return b.extend({},b.parser.parseOptions(a,[{ajax:"boolean",dirty:"boolean"}]),{url:c.attr("action")?c.attr("action"):void 0})};b.fn.form.defaults={fieldTypes:"combobox combotree combogrid combotreegrid datetimebox datebox combo datetimespinner timespinner numberspinner spinner slider searchbox numberbox passwordbox filebox textbox switchbutton".split(" "),novalidate:!1,ajax:!0,iframe:!0,dirty:!1,dirtyFields:[],url:null,queryParams:{},onSubmit:function(a){return b(this).form("validate")},onProgress:function(a){},success:function(a){},onBeforeLoad:function(a){},onLoadSuccess:function(a){},onLoadError:function(){},onChange:function(a){}}})(jQuery);