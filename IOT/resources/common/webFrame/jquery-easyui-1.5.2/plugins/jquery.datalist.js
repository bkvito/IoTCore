/**
 * jQuery EasyUI 1.5.2
 * 
 * Copyright (c) 2009-2017 www.jeasyui.com. All rights reserved.
 *
 * Licensed under the freeware license: http://www.jeasyui.com/license_freeware.php
 * To use it on other terms please contact us: info@jeasyui.com
 *
 */
(function(a){function l(b){var c=a.data(b,"datalist").options;a(b).datagrid(a.extend({},c,{cls:"datalist"+(c.lines?" datalist-lines":""),frozenColumns:c.frozenColumns&&c.frozenColumns.length?c.frozenColumns:c.checkbox?[[{field:"_ck",checkbox:!0}]]:void 0,columns:c.columns&&c.columns.length?c.columns:[[{field:c.textField,width:"100%",formatter:function(a,d,b){return c.textFormatter?c.textFormatter(a,d,b):a}}]]}))}var m=a.extend({},a.fn.datagrid.defaults.view,{render:function(b,c,e){var d=a.data(b,"datagrid");if(d.options.groupField){var g=this.groupRows(b,d.data.rows);this.groups=g.groups;d.data.rows=g.rows;for(var d=[],f=0;f<g.groups.length;f++)d.push(this.renderGroup.call(this,b,f,g.groups[f],e));a(c).html(d.join(""))}else a(c).html(this.renderTable(b,0,d.data.rows,e))},renderGroup:function(b,c,e,d){var g=a.data(b,"datagrid").options;a(b).datagrid("getColumnFields",d);var f=[];f.push('\x3cdiv class\x3d"datagrid-group" group-index\x3d'+c+"\x3e");d||(f.push('\x3cspan class\x3d"datagrid-group-title"\x3e'),f.push(g.groupFormatter.call(b,e.value,e.rows)),f.push("\x3c/span\x3e"));f.push("\x3c/div\x3e");f.push(this.renderTable(b,e.startIndex,e.rows,d));return f.join("")},groupRows:function(b,c){for(var e=a.data(b,"datagrid").options,d=[],g=0;g<c.length;g++){var f=c[g],h;a:{for(h=0;h<d.length;h++){var k=d[h];if(k.value==f[e.groupField]){h=k;break a}}h=null}h?h.rows.push(f):(h={value:f[e.groupField],rows:[f]},d.push(h))}e=0;c=[];for(g=0;g<d.length;g++)h=d[g],h.startIndex=e,e+=h.rows.length,c=c.concat(h.rows);return{groups:d,rows:c}}});a.fn.datalist=function(b,c){if("string"==typeof b){var e=a.fn.datalist.methods[b];return e?e(this,c):this.datagrid(b,c)}b=b||{};return this.each(function(){var d=a.data(this,"datalist");d?a.extend(d.options,b):(d=a.extend({},a.fn.datalist.defaults,a.fn.datalist.parseOptions(this),b),d.columns=a.extend(!0,[],d.columns),d=a.data(this,"datalist",{options:d}));l(this);d.options.data||(d=a.fn.datalist.parseData(this),d.total&&a(this).datalist("loadData",d))})};a.fn.datalist.methods={options:function(b){return a.data(b[0],"datalist").options}};a.fn.datalist.parseOptions=function(b){return a.extend({},a.fn.datagrid.parseOptions(b),a.parser.parseOptions(b,["valueField","textField","groupField",{checkbox:"boolean",lines:"boolean"}]))};a.fn.datalist.parseData=function(b){var c=a.data(b,"datalist").options,e={total:0,rows:[]};a(b).children().each(function(){var b=a.parser.parseOptions(this,["value","group"]),g={},f=a(this).html();g[c.valueField]=void 0!=b.value?b.value:f;g[c.textField]=f;c.groupField&&(g[c.groupField]=b.group);e.total++;e.rows.push(g)});return e};a.fn.datalist.defaults=a.extend({},a.fn.datagrid.defaults,{fitColumns:!0,singleSelect:!0,showHeader:!1,checkbox:!1,lines:!1,valueField:"value",textField:"text",groupField:"",view:m,textFormatter:function(b,a){return b},groupFormatter:function(a,c){return a}})})(jQuery);